<%- include('partials/_header.ejs') %>


	<main id="fullpage">
			
		<header class="section header">
				
		 	<div class="container-fluid">
			 	<div class="row">
					 <div class="col-md-12">
							<% for(var i=0; i<tasks.length; i++) { %>
									<%function validacion(){%>
										<%a=i+1%>
										<%coincidencias=[];%>
										<%arreglo_completo[-1]=[0,0,0,0,0,0,0,0,0,0];%>
										<%arrayPredefinido = arreglo_completo[i];%>
										<% for (var j=0;j<tasks.length;j++) {%>
												<%arrayUsuario = arreglo_completo[j];%>
												<%var contCoincidenciaValor = 0;%>
												<%var contCoincidenciaOrden = 0;%>
												<% arrayPredefinido.forEach(function(elementoPredefinido, i) {%>
													<% arrayUsuario.forEach(function(elementoUsuario, j) {%>
														<%if (elementoPredefinido == elementoUsuario) {%>
															<%contCoincidenciaValor++;%>
															<%if (i == j) {%>
																<%contCoincidenciaOrden++;%>
																<%}%>
																<% } %>
																<% });  %>            
																<% });%>
																<%console.log("La cantidad de repeticiones de  "+ i + "  con " + j + " en el mismo orden es: " +   contCoincidenciaOrden);%>
																<%mensaje="La cantidad de repeticiones de  "+ i + "  con " + j + " en el mismo orden es: " +   contCoincidenciaOrden;%>
										<table class="table table-bordered table-hover">
											<thead>

											</thead>
										<tbody>
													
														<tr>
														<td><%=mensaje%></td>
														</tr>
													
										</tbody>
										</table>
										
															
																
															
																
											<%}%>
										
									<%}%>
														<%validacion();%>
														
							<%}%>
									
						<table class="table table-bordered table-hover">
							
								<thead>
									<th></th>
										<% for(m=0;m<tasks.length;m++) {%>
												<th> <%=m%></th>
												<%}%>
								</thead>	

							<tbody>
								
										<% for(m=0;m<tasks.length;m++) {%>
												<tr>	
											<th scope="row"> <%=m%></th>
											<% for(k=0;k<tasks.length;k++) {%>
											<td>
													<%=k%>
											</td>
											<%}%>
										</tr>
										
												<%}%>
								
							</tbody>
							

						</table>
							
						<table class="table table-bordered table-hover">
							<thead>
								<th>N°</th>
								<th>Estudiante</th>
								<th>Dir IP</th>
								<%let respuestas = consulta[0].answers.split('&');%>
								<% for(var i=0; i<respuestas.length; i++) { %>
										<th>Respuesta<%= i+1%></th>
										<%}%>

									
								<th>Curso</th>
								<th>Cod Sesión</th>
								<th>Fecha</th>
								<th>Unidad</th>
								<th>Actividad</th>
								<th>Sección</th>
								<th>Subsección</th>
								<th>Hora</th>
								<th>Página</th>
							</thead>
							<tbody><!--de aqui hacia abajo se recorre el objeto consulta que trae toda la info de la base de datos para mostrarlo-->
								  <% let prueba , pruebas; %>
								 
								  
								  <% for(var i=0; i<consulta.length; i++) { %>
										<% let prueba , pruebas,answer_check; %>
										<% prueba = consulta[i].answers.split('&');%>
										
										
										
										<tr>
												<td><%= i + 1%></td><!--genera un numero de ingreso de acuerdo a la posicion en la que esta en el array ejemplo la posicion o +1 es la primera ingresada-->
												<td><%= consulta[i].username %></td><!--asi se trae la info dependiendo del nombre definido en el schema-->
												<td><%= consulta[i].dir_ip %></td>
												<% for(var j=0; j<prueba.length; j++) {%>
												<% answer_check=prueba[j].split('=');%>
												<td><%=answer_check[1]%></td>
												<%}%> 
												<td><%= consulta[i].course %></td>
												<td><%= consulta[i].session %></td>
												<td><%= consulta[i].date %></td>
												<td><%= consulta[i].unit %></td>
												<td><%= consulta[i].name %></td>
												<td><%= consulta[i].section %></td>
												<td><%= consulta[i].subsection %></td>
												<td><%= consulta[i].time %></td>
												<td><%= consulta[i].page %></td>
											<!--	<td>
												  <a
													class="<%= consulta[i].status ? 'btn btn-success' : 'btn btn-dark'%>"
													href="/turn/<%= consulta[i]._id %>">Done</a>condicional donde segun el estado se cambia de color el boton
												  <a href="/delete/<%= consulta[i]._id %>"
													class="btn btn-danger">
													Delete
												  </a>
												  <a href="/edit/<%= consulta[i]._id %>" class="btn btn-info">
													Edit
												  </a>
												</td>-->
											  </tr>
											  
								<%}%>
							</tbody>
						</table>
					 </div>
				 </div>

				 <div class="row">
					<div class="col-md-8">.col-md-8</div>
					<div class="col-md-4">.col-md-4</div>
				 </div>
		 	</div>
		</header>
		<!-- <section class="section Productos">
			<div class="contenedor-titulo">
				<h1 class="titulo"><span class="texto-verde">
						Productos
					</span></h1>
			</div>

			<video loop muted data-autoplay class="bg-video">
				<source src="media/Reusa.mp4" type="video/mp4">
			</video>
		</section> -->
		
	<footer class="section footpage">
			<h2 class="texto-blanco">SIGUENOS EN REDES SOCIALES</h2>
			<p class="redes-sociales">
				<a href="" class="facebook"><i class="fab fa-facebook-square"></i></a>
				<a href="" class="instagram"><i class="fab fa-instagram"></i></a>
				<a href="" class="twitter"><i class="fab fa-twitter-square"></i></a>
			</p>
	</footer>
	</main>

    <%- include('partials/_footer.ejs') %>