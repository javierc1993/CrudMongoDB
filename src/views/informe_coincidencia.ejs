<%- include('partials/_header.ejs') %>


	<main id="fullpage">
			
		<header class="section header">
				
		 	<div class="container-fluid">
			 	<div class="row">
					 <div class="col-md-12">
						
							
							<table class="table table-bordered table-hover">
									<thead>
											
										<th>Estudiante #</th>
										<th>Estudiante #</th>
										<th>Coinciden en: </th>
										<th>Hora de Entrega primer estudiante</th>
										<th>Hora de Entrega segundo estudiante</th>
										<th>Fecha: </th>
										<th>Dirección IP primer estudiante</th>
										<th>Dirección IP segundo estudiante</th>	
									</thead>
								<tbody>
											
															
							<% for(var i=0; i<obj.datos.length; i++) { %>
									
														<tr>
														
														<td><%=obj.datos[i].estudiante1%></td>
														<td><%=obj.datos[i].estudiante2%></td>
														<td><%=obj.datos[i].coincidencias%></td>
														<td><%=obj.datos[i].horaestudiante1%></td>
														<td><%=obj.datos[i].horaestudiante2%></td>
														<td><%=obj.datos[i].fecha%></td>
														<td><%=obj.datos[i].dir_ip1%></td>
														<td><%=obj.datos[i].dir_ip2%></td>
													</tr>					
							<%}%>
						</tbody>
					</table>
						 
						<!--	<table class="table table-bordered table-hover">
									<thead>
											
										<th>Estudiante #</th>
										<th>Estudiante #</th>
										<th>Coinciden en: </th>
										<th>Hora de Entrega primer estudiante</th>
										<th>Hora de Entrega segundo estudiante</th>
										<th>Fecha: </th>
										<th>Dirección IP primer estudiante</th>
										<th>Dirección IP segundo estudiante</th>
										<th>Enlace: </th>
										
										
										
									</thead>
								<tbody>
											
										<%let arreglo_coincidencias=[];%>				
							<% for(var i=0; i<tasks.length; i++) { %>
									<%function validacion(){%>
											<%a=i+1%>
											<%coincidencias=[];%>
											<%arrayPredefinido = arreglo_completo[i];%>
										<% for (var j=0;j<tasks.length;j++) {%>
												<%b=j+1%>
												<%arrayUsuario = arreglo_completo[j];%>
												<%var contCoincidenciaValor = 0;%>
												<%var contCoincidenciaOrden = 0;%>
												<%var limite= arreglo_completo[1].length * 0.9 ;%>
												<% arrayPredefinido.forEach(function(elementoPredefinido, i) {%>
													<% arrayUsuario.forEach(function(elementoUsuario, j) {%>
														<%if (elementoPredefinido == elementoUsuario) {%>
															<%contCoincidenciaValor++;%>
															<%if (i == j) {%>
																<%contCoincidenciaOrden++;%>
																<%}%>
																<% } %>
																<% });  %>            
																<% });%>
															<%mensaje= contCoincidenciaOrden;%>
															<%arreglo_coincidencias.push(contCoincidenciaOrden);%>
														    <%if ( a!=b && contCoincidenciaOrden>limite ) {%>
														<tr>
														<td><%=consulta[i].username%></td>
														<td><%=consulta[j].username%></td>
														<td><%=mensaje%> respuestas</td>
														<td><%=consulta[i].time%></td>
														<td><%=consulta[j].time%></td>
														<td><%=consulta[i].date%></td>
														<td><%=consulta[i].dir_ip%></td>
														<td><%=consulta[j].dir_ip%></td>
														<td><%=consulta[i].page%></td>
														<%}%>
											<%}%>
										
									<%}%>
														<%validacion();%>
													</tr>					
							<%}%>
						</tbody>
					</table>-->
							
			<!--	<table class="table table-bordered table-hover">
							
								<thead>
									<th></th>
										<% for(m=0;m<tasks.length;m++) {%>
												<th> <%=m%></th>
												<%}%>
								</thead>	

							<tbody>
								
										<% for(m=0;m<tasks.length;m++) {%>
												<tr>	
											<th scope="row"> <%=m%></th>
											<% for(k=0;k<tasks.length;k++) {%>
											<td>
													<%=k%>
											</td>
											<%}%>
										</tr>
										
												<%}%>
								
							</tbody>
							

						</table>
							-->
						<table class="table table-bordered table-hover">
							<thead>
								<th>N°</th>
								<th>Estudiante</th>
								<th>Dir IP</th>
								<%let respuestas = consulta[0].answers.split('&');%>
								<% for(var i=0; i<respuestas.length; i++) { %>
										<th>Respuesta<%= i+1%></th>
										<%}%>

									
								<th>Curso</th>
								<th>Cod Sesión</th>
								<th>Fecha</th>
								<th>Unidad</th>
								<th>Actividad</th>
								<th>Sección</th>
								<th>Subsección</th>
								<th>Hora</th>
								<th>Página</th>
							</thead>
							<tbody><!--de aqui hacia abajo se recorre el objeto consulta que trae toda la info de la base de datos para mostrarlo-->
								  <% let prueba , pruebas; %>
								  <% for(var i=0; i<consulta.length; i++) { %>
										<% let prueba , pruebas,answer_check; %>
										<% prueba = consulta[i].answers.split('&');%>
										<tr>
												<td><%= i + 1%></td><!--genera un numero de ingreso de acuerdo a la posicion en la que esta en el array ejemplo la posicion o +1 es la primera ingresada-->
												<td><%= consulta[i].username %></td><!--asi se trae la info dependiendo del nombre definido en el schema-->
												<td><%= consulta[i].dir_ip %></td>
												<% for(var j=0; j<prueba.length; j++) {%>
												<% answer_check=prueba[j].split('=');%>
												<td><%=answer_check[1]%></td>
												<%}%> 
												<td><%= consulta[i].course %></td>
												<td><%= consulta[i].session %></td>
												<td><%= consulta[i].date %></td>
												<td><%= consulta[i].unit %></td>
												<td><%= consulta[i].name %></td>
												<td><%= consulta[i].section %></td>
												<td><%= consulta[i].subsection %></td>
												<td><%= consulta[i].time %></td>
												<td><%= consulta[i].page %></td>
												
											<!--	<td>
												  <a
													class="<%= consulta[i].status ? 'btn btn-success' : 'btn btn-dark'%>"
													href="/turn/<%= consulta[i]._id %>">Done</a>condicional donde segun el estado se cambia de color el boton
												  <a href="/delete/<%= consulta[i]._id %>"
													class="btn btn-danger">
													Delete
												  </a>
												  <a href="/edit/<%= consulta[i]._id %>" class="btn btn-info">
													Edit
												  </a>
												</td>-->
											  </tr>
											  
								<%}%>
							</tbody>
						</table>
					 </div>
				 </div>

				 <div class="row">
					<div class="col-md-8">.col-md-8</div>
					<div class="col-md-4">.col-md-4</div>
				 </div>
		 	</div>
		</header>
		<!-- <section class="section Productos">
			<div class="contenedor-titulo">
				<h1 class="titulo"><span class="texto-verde">
						Productos
					</span></h1>
			</div>

			<video loop muted data-autoplay class="bg-video">
				<source src="media/Reusa.mp4" type="video/mp4">
			</video>
		</section> -->
		
	<footer class="section footpage">
			<h2 class="texto-blanco">SIGUENOS EN REDES SOCIALES</h2>
			<p class="redes-sociales">
				<a href="" class="facebook"><i class="fab fa-facebook-square"></i></a>
				<a href="" class="instagram"><i class="fab fa-instagram"></i></a>
				<a href="" class="twitter"><i class="fab fa-twitter-square"></i></a>
			</p>
	</footer>
	</main>

    <%- include('partials/_footer.ejs') %>